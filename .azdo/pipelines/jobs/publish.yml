steps:
  - task: UseDotNet@2
    displayName: 'Use .NET SDK'
    inputs:
      version: $(DotNetVersion)

  - task: DotNetCoreCLI@2
    inputs:
      command: publish
      arguments: '--configuration Release --output "$(Build.ArtifactStagingDirectory)/$(PackageArtifactName)/$(majorMinorPatch)" --no-build --version-suffix $(build.buildNumber)'
      projects: $(SourceProjectsString)
      publishWebProjects: false
      modifyOutputPath: false
      zipAfterPublish: false

  - task: PublishPipelineArtifact@1
    displayName: Publish Package Artifact
    inputs:
      targetPath: "$(Build.ArtifactStagingDirectory)/$(PackageArtifactName)/${{ parameters.Version }}"
      artifactName: $(PackageArtifactName)
      artifactType: 'pipeline'
